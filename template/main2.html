<html>
<head>
	<title>jQuery Autocomplete</title>
	<script type="text/javascript" src="/static/jquery.js"></script>
	<script type='text/javascript' src='/static/jquery.autocomplete.js'></script>
	<link rel="stylesheet" type="text/css" href="/static/jquery.autocomplete.css" />
</head>

<body>
<form action="" onsubmit="return false;">
		<input type="text" id="search_query" value="" style="width: 200px;" />
</form>

<script type="text/javascript">
function findValue(li) {
	if( li == null ) return alert("No match!");

	// if coming from an AJAX call, using EventID as sValue
	if( !!li.extra ) var sValue = li.extra[0];

	// otherwise, using EventName
	else var sValue = li.selectValue;
    	    
	window.location="/eventdetails/"+sValue;
}

function selectItem(li) {
	findValue(li);
}

function formatItem(row) {
	return row[0];
}

function lookupLocal(){
	var oSuggest = $("#search_query")[0].autocompleter;

	oSuggest.findValue();

	return false;
}

$(document).ready(function() {
	$("#search_query").autocompleteArray(
		{{ result_list|safe }},
		{
			delay:10,
			minChars:1,
			onItemSelect:selectItem,
			onFindValue:findValue,
			autoFill:false

		}
	);
});
</script>

</body>
</html>
