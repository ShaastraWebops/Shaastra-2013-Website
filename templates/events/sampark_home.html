{% extends "base.html" %}
{% block hash_handler %}
<script language = 'JavaScript' type="text/javascript" src="{{site_url}}static/scripts/slides.min.jquery.js" charset = "utf-8"></script>
<script type="text/javascript">
  $(function(){
    // Keep a mapping of url-to-container for caching purposes.
    var cache = {
      // If url is '' (no fragment), display this div's content.
      '': $('.bbq-default')
    };
    // Bind an event to window.onhashchange that, when the history state changes,
    // gets the url from the hash and displays either our cached content or fetches
    // new content to be displayed.
    $(window).bind( 'hashchange', function(e) {
      // Get the hash (fragment) as a string, with any leading # removed. Note that
      // in jQuery 1.4, you should use e.fragment instead of $.param.fragment().
      var url = $.param.fragment();
      if(url[0] == '!')
	url = url.slice(1);
      var event_name = url.split('/')[0] + '/' + url.split('/')[1], tab_name = url.split('/')[2];

      $( '.bbq-item,.bbq-default,#generalContents' ).hide();
      if(!url || url=='_=_') {
	$('.bbq-default').show();
	$('#tabbox').css('visibility','hidden');
	$('#body').removeClass('bg1');
	return;
      }
      $('.bbq-loading').show();
      if(url=='events'||url=='hospi') {
	$('#generalContents').load(url,function(){
	  $('.bbq-loading').hide();
	  $('#generalContents').show();
	});
	if(url=='hospi'){
	  $("#body").removeClass('bg1');
	}
	if(url=='events') {
	  $('#tabbox').css({'visibility':'visible','left':'-1000px'}).animate({'visibility':'visible','left':'0px'});
	  $('#body').addClass('bg1');
	} else {
	  $(".menu").css({visibility:"hidden"});
	  $('#tabbox').css({visibility:"hidden"});
	 // $("#generalContents .tabtext").jScrollPane({showArrows: true,verticalScroll: true, autoReinitialise: true});
	}
	return;
      }
      $(".bbq-item").removeClass("bbq-current");
      if(cache[event_name]) {
	cache[event_name].show();
	cache[event_name].addClass("bbq-current");
	if(tab_name){
	  $(".bbq-current .tabtext").hide();
	  $(".bbq-current").find("#"+tab_name).show();

	} else {
	  openEvent();
	}
	$('.bbq-loading').hide();
      } else {
	cache[event_name] = $( '<div class="bbq-item bbq-current"></div>' ).appendTo( '.bbq-content' );

	// Load external content via AJAX. Note that in order to keep this
	// example streamlined, only the content in .infobox is shown. You'll
	// want to change this based on your needs.
	cache[event_name].load( "{{site_url}}" + event_name, function(){
	  if(tab_name){
	    $(".bbq-current .tabtext").hide();
	    $(".bbq-current").find("#"+tab_name).show();

	  } else {
	    openEvent();
	  }
	  $( '.bbq-loading' ).hide();
	  resetabs();
	});
      }
    })
    $(window).trigger('hashchange');
  });
</script>
<script>
		$(function(){
			$('#slides').slides({
				preload: true,
				preloadImage: '{{site_url}}static/img/loading.gif',
				play: 1000,
				pause: 1000,
				hoverPause: true,
				pagination:false,
				generatePagination:false
			});
		});
</script>
<style type="text/css" media="screen">
            .slides_container {
            	margin-top:10px;
                width:900px;
                height:375px;
            }
            .slides_container div {
                width:900px;
                height:375px;
                display:block;
            }
</style>
<link rel="stylesheet" type="text/css" href="{{site_url}}static/css/sshow.css"  />
{% endblock %}
{% block footer %}
    <div id="footer">
    <center>
    <div id="stabbox" style="height:130px;width:950px;position:relative;">
    	<div id="stab1" class="stab" style="background:url({{site_url}}static/img/sprite3.jpg) 0 0;">
         <div id="tab1name" class="tabname">
            Bengaluru
            </div>
        </div>
     <div id="stab2" class="stab" style="background:url({{site_url}}static/img/sprite3.jpg) -129px 0;">
            <div id="tab2name" class="tabname">
            Hyderabad
            </div>
        </div>
     <div id="stab3" class="stab" style="background:url({{site_url}}static/img/sprite3.jpg) -387px 0;">
            <div id="tab3name" class="tabname">
            Coimbatore
            </div>
        </div>
     <div id="stab4" class="stab" style="background:url({{site_url}}static/img/kerala-tab1.jpg);">
            <div id="tab7name" class="tabname">
            Kerala
            </div>
        </div>
     </div>
     </div>
     </div>
    </center>
{% endblock %}
{% block content %}
<div id="content" class="bbq" style="width:100%;">
        <div class="bbq-content">
        <!-- This will be shown while loading AJAX content. You'll want to get an image that suits your design at http://ajaxload.info/ -->
        <div id="loadinggif"class="bbq-loading" style="display:none;">
            <img src="{{site_url}}static/img/loading.gif" alt="Loading"/> Loading content...
        </div>
        <!-- This content will be shown if no path is specified in the URL fragment. -->
	<center>
        <div class="bbq-default" style="height:425px; width:900px; color:#FFF; opacity:0.9; background-color:#222; text-align:left; padding:0px 20px;margin-top:10px;">
     <div id="new" style="width:100%;cursor:auto;"><marquee>Move your pointer over each city picture for the corresponding events list. Click on each event for details </marquee></div>	
	<div id="samparktext">
        <div id="slides">
            <div class="slides_container">
                <div>
                    <img src="{{site_url}}static/img/shows/1.jpg">
                </div>
                <div>
                    <img src="{{site_url}}static/img/shows/2.jpeg">
                </div>
                <div>
                    <img src="{{site_url}}static/img/shows/3.jpg">
                </div>
                <div>
                    <img src="{{site_url}}static/img/shows/4.bmp">
                </div>
            </div>
        </div>
        </div>
	</div>
	</center>
        <div class="bbq-item">
        </div>
        </div>
</div>
{% endblock %}
{% block events_menu %}
    {% for city in city_set %}
    <div id="menu{{forloop.counter}}" class="menu" style="
    {% if city == 'Bengaluru' %}margin-left:17%;{% endif %}
    {% if city == 'Hyderabad' %}margin-left:32%;{% endif %}
    {% if city == 'Coimbatore' %}margin-left:43%;{% endif %}
    {% if city == 'Pune' %}margin-left:57%;{% endif %}
    {% if city == 'Chennai' %}margin-left:70%;{% endif %} ">
        	<div id="menutopcolour{{forloop.counter}}" class="menutopcolour">
            </div>
            <div id="menulist{{forloop.counter}}" class="menulist">
            <ul id="menuhead{{forloop.counter}}" class="menuhead">
            {% if city == 'Bengaluru' %}Bengaluru{% endif %}
            {% if city == 'Hyderabad' %}Hyderabad{% endif %}
            {% if city == 'Pune' %}Kerala{% endif %}
            {% if city == 'Chennai' %}Chennai{% endif %}
            {% if city == 'Coimbatore' %}Coimbatore{% endif %}
            </ul>
            <ul id="menus{{forloop.counter}}">
                {% if city == 'Bengaluru' %}
                {% for event in bengaluruevents %}
         		    <li onclick="window.location.href='#!events/{{event|slugify}}'">{{event.title|cut:"B_"}}</li>

                {% endfor %}
                {% endif %}
                {% if city == 'Hyderabad' %}
                {% for event in hyderabadevents %}
         		    <li onclick="window.location.href='#!events/{{event|slugify}}'">{{event.title|cut:"H_"}}</li>
                {% endfor %}
                {% endif %}
                {% if city == 'Pune' %}
                {% for event in puneevents %}
         		    <li onclick="window.location.href='#!events/{{event|slugify}}'">{{event.title|cut:"P_"}}</li>
                {% endfor %}
                {% endif %}
                {% if city == 'Chennai' %}
                {% for event in chennaievents %}
         		    <li onclick="window.location.href='#!events/{{event|slugify}}'">{{event.title|cut:"Ch_"}}</li>
                {% endfor %}
                {% endif %}
                {% if city == 'Coimbatore' %}
                {% for event in coimbatoreevents %}
         		    <li onclick="window.location.href='#!events/{{event|slugify}}'">{{event.title|cut:"C_"}}</li>
                {% endfor %}
                {% endif %}
      		</ul>
            </div>
        </div>
    {% endfor %}
{% endblock %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="static/js/bootstrap-transition.js"></script>
<script src="static/js/bootstrap-modal.js"></script>
