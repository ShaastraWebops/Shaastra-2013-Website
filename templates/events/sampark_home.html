{% extends "base.html" %}
{% block hash_handler %}
<script type="text/javascript">
  $(function(){
    // Keep a mapping of url-to-container for caching purposes.
    var cache = {
      // If url is '' (no fragment), display this div's content.
      '': $('.bbq-default')
    };
    // Bind an event to window.onhashchange that, when the history state changes,
    // gets the url from the hash and displays either our cached content or fetches
    // new content to be displayed.
    $(window).bind( 'hashchange', function(e) {
      // Get the hash (fragment) as a string, with any leading # removed. Note that
      // in jQuery 1.4, you should use e.fragment instead of $.param.fragment().
      var url = $.param.fragment();
      if(url[0] == '!')
	url = url.slice(1);
      var event_name = url.split('/')[0] + '/' + url.split('/')[1], tab_name = url.split('/')[2];

      $( '.bbq-item,.bbq-default,#generalContents' ).hide();
      if(!url || url=='_=_') {
	$('.bbq-default').show();
	$('#tabbox').css('visibility','hidden');
	$('#body').removeClass('bg1');
	return;
      }
      $('.bbq-loading').show();
      if(url=='events'||url=='hospi') {
	$('#generalContents').load(url,function(){
	  $('.bbq-loading').hide();
	  $('#generalContents').show();
	});
	if(url=='hospi'){
	  $("#body").removeClass('bg1');
	}
	if(url=='events') {
	  $('#tabbox').css({'visibility':'visible','left':'-1000px'}).animate({'visibility':'visible','left':'0px'});
	  $('#body').addClass('bg1');
	} else {
	  $(".menu").css({visibility:"hidden"});
	  $('#tabbox').css({visibility:"hidden"});
	 // $("#generalContents .tabtext").jScrollPane({showArrows: true,verticalScroll: true, autoReinitialise: true});
	}
	return;
      }
      $(".bbq-item").removeClass("bbq-current");
      if(cache[event_name]) {
	cache[event_name].show();
	cache[event_name].addClass("bbq-current");
	if(tab_name){
	  $(".bbq-current .tabtext").hide();
	  $(".bbq-current").find("#"+tab_name).show();

	} else {
	  openEvent();
	}
	$('.bbq-loading').hide();
      } else {
	cache[event_name] = $( '<div class="bbq-item bbq-current"></div>' ).appendTo( '.bbq-content' );

	// Load external content via AJAX. Note that in order to keep this
	// example streamlined, only the content in .infobox is shown. You'll
	// want to change this based on your needs.
	cache[event_name].load( "{{site_url}}" + event_name, function(){
	  if(tab_name){
	    $(".bbq-current .tabtext").hide();
	    $(".bbq-current").find("#"+tab_name).show();

	  } else {
	    openEvent();
	  }
	  $( '.bbq-loading' ).hide();
	  resetabs();
	});
      }
    })
    $(window).trigger('hashchange');
  });
</script>
{% endblock %}
{% block footer %}
    <div id="footer">
    <center>
    <div id="stabbox" style="height:130px;width:950px;position:relative;">
    	<div id="stab1" class="stab" style="background:url({{site_url}}static/img/sprite3.jpg) 0 0;" onclick="window.location.href='http://www.shaastra.org/2013/main/#!events/air-show'">
         <div id="tab1name" class="tabname">
            Air Show
            </div>
        </div>
     <div id="stab2" class="stab" style="background:url({{site_url}}static/img/sprite3.jpg) -129px 0;" onclick="window.location.href='http://www.shaastra.org/2013/main/#!events/research-expo'">
            <div id="tab2name" class="tabname">
            Research Expo
            </div>
        </div>
     <div id="stab3" class="stab" style="background:url({{site_url}}static/img/sprite3.jpg) -387px 0;" onclick="window.location.href='http://www.shaastra.org/2013/main/#!events/shaastra-nights'">
            <div id="tab3name" class="tabname">
            Shaastra Nights
            </div>
        </div>
     <div id="stab4" class="stab" style="background:url({{site_url}}static/img/kerala-tab1.jpg);" onclick="window.location.href='http://www.shaastra.org/2013/main/#!events/shaastra-exhibitions'">
            <div id="tab7name" class="tabname">
            Shaastra Exhibitions
            </div>
        </div>
     </div>
     </div>
     </div>
    </center>
{% endblock %}
{% block content %}
<div id="content" class="bbq" style="width:100%;">
        <div class="bbq-content">
        <!-- This will be shown while loading AJAX content. You'll want to get an image that suits your design at http://ajaxload.info/ -->
        <div id="loadinggif"class="bbq-loading" style="display:none;">
            <img src="{{site_url}}static/img/loading.gif" alt="Loading"/> Loading content...
        </div>
        <!-- This content will be shown if no path is specified in the URL fragment. -->
	<center>
        <div class="bbq-default" style="height:425px; width:900px; color:#FFF; opacity:0.9; background-color:#222; text-align:left; padding:0px 20px;margin-top:10px;">
     <div id="new" style="width:100%;cursor:auto;"><marquee>Move your pointer over each city picture for the corresponding events list. Click on each event for details </marquee></div>	
	<div id="samparktext">
       <p>Samparks are a series of workshops, events, lectures and qualifiers that are held at cities across India in an effort to bring Shaastra closer to everyone. This year, with new and improved events that assure wildcard entries, never before seen demonstrations and much more , the Samparks in your city are something that you can not afford to miss!</p>
  <table width="100%">
    <tr style="text-align:center;">
    <th colspan="2"><strong>Sampark Chennai</strong></td>
    </tr>
    <tr style="text-align:center;">
    <td width="50%">Robotics Workshop, IIT Madras</td>
    <td width="50%">Hovercraft Workshop, IIT Madras</td>
    </tr>
    <tr>
    <td width="50%">
    IBot, Robotics club of IIT Madras presents you the chance to learn Autonomous Robotics. A one day workshop participants are given a hands-on experience of building line follower bot using Arduino development platform. Did you ever dream of coding a Robot and got stuck as a beginner! Then here is your chance to dive into the world of robotics.
    </td>
    <td width="50%">
    This Shaastra, we give you a chance to take a leap into the world of aerobotics. Learn how a hovercraft is built from scratch, and get the confidence to go ahead and build or modify your hovercraft to new levels.The workshop is aimed for amateurs in aerobotics and is a rare opportunity for teams to make a hovercraft hands-on and also get to know the principles behind this craftâ€™s mechanisms and electronics.
    </td>
    </tr>
    <tr style="text-align:center;">
    <td colspan="2" style="font-size:15px;">Registrations are now open. Limited seats available! Use the links below to register as early as possible.</td>
    </tr>
    <tr style="text-align:center;">
    <td width="50%"><button onclick='window.location.hash="events/ch_robotics-workshop/registration"' class="btn btn-primary">Robotics Workshop</button></td>
    <td width="50%"><button onclick='window.location.hash="events/ch_hovercraft-workshop/registration"' class="btn btn-primary">Hovercraft Workshop</button></td>
    </tr>
  </table>
<p>
        </div>
	</div>
	</center>
        <div class="bbq-item">
        </div>
        </div>
</div>
{% endblock %}
{% block events_menu %}
    {% for city in city_set %}
    <div id="menu{{forloop.counter}}" class="menu" style="
    {% if city == 'Bengaluru' %}margin-left:17%;{% endif %}
    {% if city == 'Hyderabad' %}margin-left:32%;{% endif %}
    {% if city == 'Coimbatore' %}margin-left:43%;{% endif %}
    {% if city == 'Pune' %}margin-left:57%;{% endif %}
    {% if city == 'Chennai' %}margin-left:70%;{% endif %} ">
        	<div id="menutopcolour{{forloop.counter}}" class="menutopcolour">
            </div>
            <div id="menulist{{forloop.counter}}" class="menulist">
            <ul id="menuhead{{forloop.counter}}" class="menuhead">
            {% if city == 'Bengaluru' %}Bengaluru{% endif %}
            {% if city == 'Hyderabad' %}Hyderabad{% endif %}
            {% if city == 'Pune' %}Kerala{% endif %}
            {% if city == 'Chennai' %}Chennai{% endif %}
            {% if city == 'Coimbatore' %}Coimbatore{% endif %}
            </ul>
            <ul id="menus{{forloop.counter}}">
                {% if city == 'Bengaluru' %}
                {% for event in bengaluruevents %}
         		    <li onclick="window.location.href='#!events/{{event|slugify}}'">{{event.title|cut:"B_"}}</li>

                {% endfor %}
                {% endif %}
                {% if city == 'Hyderabad' %}
                {% for event in hyderabadevents %}
         		    <li onclick="window.location.href='#!events/{{event|slugify}}'">{{event.title|cut:"H_"}}</li>
                {% endfor %}
                {% endif %}
                {% if city == 'Pune' %}
                {% for event in puneevents %}
         		    <li onclick="window.location.href='#!events/{{event|slugify}}'">{{event.title|cut:"P_"}}</li>
                {% endfor %}
                {% endif %}
                {% if city == 'Chennai' %}
                {% for event in chennaievents %}
         		    <li onclick="window.location.href='#!events/{{event|slugify}}'">{{event.title|cut:"Ch_"}}</li>
                {% endfor %}
                {% endif %}
                {% if city == 'Coimbatore' %}
                {% for event in coimbatoreevents %}
         		    <li onclick="window.location.href='#!events/{{event|slugify}}'">{{event.title|cut:"C_"}}</li>
                {% endfor %}
                {% endif %}
      		</ul>
            </div>
        </div>
    {% endfor %}
{% endblock %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="static/js/bootstrap-transition.js"></script>
<script src="static/js/bootstrap-modal.js"></script>
