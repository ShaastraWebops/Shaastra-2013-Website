{% extends "base.html" %}
 
{% block navigation %}
                          
    <li><a href="{{SITE_URL}}">Home</a></li>
                                             
    <li class="active"><a href="{{SITE_URL}}category/">Events</a></li>
                            
    {% for topic in topics %}
        <li>
            <a href="{{SITE_URL}}topic/{{topic.url_name}}/">{{topic.title}}</a>
        </li>    
    {% endfor %}

{% endblock %}

{% block content %}
  
<!-- Navigation list on top
================================================== -->
<header class="jumbotron subhead" id="overview">
  <div class="subnav-fixed">
    <ul class="nav nav-pills">
    {% for i in categories %}
      <li {% ifequal c.url_name i.url_name %}class="dropdown active"{% endifequal %}{% ifnotequal c.url_name i.url_name %}class="dropdown"{% endifnotequal %}>
        <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span style="text-transform: uppercase">{{i.name}}</span><b class="caret"></b></a>
        <ul class="dropdown-menu">
        <li><a href="{{SITE_URL}}category/{{i.url_name}}/">All Events</a></li>
        <li class="divider"></li>
        {% for j in events %}
            {% if j.category == i %}
                <li><a href="{{SITE_URL}}category/{{i.url_name}}/#{{j.id}}" >{{j.title}}</a></li>
            {% endif %}
        {% endfor %}
        </ul>
      </li>
    {% endfor %}
    </ul>
  </div>
</header>
<!--Events-->
 
    <div id="events" class="span12">
    <hr>
    <h2><center>EVENTS UNDER <span style="text-transform: uppercase">{{c.name}}</span></center></h2>
        <hr>
        {% for i in events_list %}
        
            <!-- For an unknown reason, if the link has to work on another page, both name and id are required -->
            <div name="{{i.id}}" id="{{i.id}}" class="span8">
				</br>
				</br>
				</br>
				</br>
                <h3><span style="text-transform: uppercase">{{i.title}}</span></h3>
                </br>
                <div class="well">
					{% if i.status == "s" %}
    	                <span class="label label-important">Sold</span>
                    {% endif %}
                    {% if i.status == "a"%}
           	            <span class="label label-success">Available</span>
                    {% endif %} 
                    <hr>
                    <br>
                    <!-- event description -->
                    {{i.about}}
                    <br><br><br>
                    <!-- label for showing status of event -->
                               
                </div>
            </div>
       <div id="images" class="span3">
            <br><br><br><br><br><br>   
                <!-- image carousel -->
                <div id="{{i.id}}{{i.id}}" class="carousel slide">
                    
                    <div class="carousel-inner">
                    
                        <div class="item active">
                         {% for j in photos_list %}
                       	 {% if j.event == i %}
							{% ifchanged i %}
                        	 <img src="{{MEDIA_URL}}{{j.image}}" width="300px" height="200px" alt="">
							{% endifchanged %}
                         {% endif %}
                    	 {% endfor %}   
                        </div>                    
                    
                    {% for j in photos_list %}
                        {% if j.event == i %}
							{% ifchanged i %}
							{% else %}
                        		<div class="item">
                            		<img src="{{MEDIA_URL}}{{j.image}}" width="300px" height="200px" alt="">
                       			</div>
							{% endifchanged %}
                        {% endif %}
                    {% endfor %}
                  
                    </div><!--/.carousel-inner -->
                  
                    <a class="left carousel-control" href="#{{i.id}}{{i.id}}" data-slide="prev">&lsaquo;</a>
                    <a class="right carousel-control" href="#{{i.id}}{{i.id}}" data-slide="next">&rsaquo;</a>
                </div><!--/.i -->

        </div><!-- /.images --> 
        </br>
		</br>
		</br>
		</br>       
        {% endfor %}
        
    </div><!--/.events -->
</div><!--/.row -->

{% endblock %}
{% block js %}
<!-- Script is for automatic cycling with interval as mentioned below -->   
<script>
{% for i in events_list %}
    $('#{{i.id}}{{i.id}}').carousel({
        interval: 3000
    });
{% endfor %}
</script> 
{% endblock %}
